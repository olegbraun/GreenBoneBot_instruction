# Инструкция по использованию GreenBoneBot

## Для обычных пользователей

### Начало работы
1. Запустите бота, отправив команду `/start`
2. Бот поприветствует вас и попросит ввести 4-х или 5-значный код для участия в розыгрыше
3. Введите полученный код (должен состоять из 4 или 5 цифр)

### Проверка регистрации
- Если вы уже зарегистрированы в системе, при повторном запуске бота вы увидите сообщение с вашим уникальным номером участника и введенным кодом
- Если введенный код не существует в системе, бот сообщит об этом и попросит ввести корректный код
- После успешной регистрации вам будет присвоен уникальный трехзначный номер участника

### Важные моменты
- Код должен состоять только из цифр и иметь длину 4 или 5 символов
- Код должен быть из списка доступных кодов, которые определяет администратор
- Уникальный номер участника используется для идентификации в розыгрыше
- Вы можете получать сообщения от администратора через бота
- После успешной регистрации вам остается только ожидать окончания розыгрыша

## Для администраторов

### Начало работы
1. Запустите бота, отправив команду `/start`
2. Бот определит, что вы администратор, и предоставит вам административную панель с кнопками

### Управление кодами
1. Нажмите кнопку "Коды" в административной панели
2. Вы увидите текущий список кодов или сообщение, что коды не добавлены
3. Для изменения кодов нажмите кнопку "Изменить коды"
4. Введите новые коды через запятую (например: 1234,3453,2324,2434)
5. Коды должны быть 4-х или 5-значными числами

### Управление количеством участников
1. Нажмите кнопку "Кол-во участников" в административной панели
2. Вы увидите текущее максимальное количество участников
3. Для изменения нажмите кнопку "Изменить"
4. Введите новое максимальное количество участников (должно быть положительным целым числом)

### Просмотр списка пользователей
1. Нажмите кнопку "Просмотреть пользователей" в административной панели
2. Вы увидите список пользователей с пагинацией (по 5 пользователей на страницу)
3. Для каждого пользователя отображается:
   - Уникальный трехзначный номер участника (или "Не назначен")
   - Имя
   - Username
   - Дата регистрации
   - Введенный код (или "Не введен")
4. Используйте кнопки навигации для перемещения между страницами
5. Для каждого пользователя доступны кнопки "Изменить код", "Изменить уникальный номер" и "Написать пользователю"

### Изменение кода пользователя
1. В списке пользователей найдите нужного пользователя
2. Нажмите кнопку "Изменить код" рядом с пользователем
3. Введите новый код для пользователя (должен быть 4-х или 5-значным числом)
4. Код должен существовать в списке доступных кодов

### Изменение уникального номера пользователя
1. В списке пользователей найдите нужного пользователя
2. Нажмите кнопку "Изменить уникальный номер" рядом с пользователем
3. Введите новый трехзначный номер для пользователя
4. Номер должен быть уникальным и состоять из трех цифр

### Отправка сообщений пользователям
1. В списке пользователей найдите нужного пользователя
2. Нажмите кнопку "Написать пользователю" рядом с пользователем
3. Введите текст сообщения, которое хотите отправить
4. Бот отправит ваше сообщение выбранному пользователю
5. Пользователь получит сообщение с пометкой "Сообщение от администратора"
6. Если пользователь заблокировал бота, вы получите соответствующее уведомление

### Экспорт данных
1. Нажмите кнопку "Получить CSV файл" в административной панели
2. Бот сгенерирует и отправит вам CSV файл со списком всех пользователей

### Навигация
- Для возврата в главное меню администратора используйте кнопку "Назад"

## Технические особенности

### Требования к кодам
- Коды должны состоять только из цифр
- Длина кода должна быть 4 или 5 символов
- Коды вводятся через запятую без пробелов

### Уникальные номера участников
- Каждому зарегистрированному пользователю присваивается уникальный трехзначный номер
- Номер используется для идентификации участника в розыгрыше
- Номер отображается пользователю после успешной регистрации
- Администратор может изменить уникальный номер пользователя через административную панель
- Уникальный номер должен состоять из трех цифр и быть уникальным в системе
- При повторном запуске бота пользователь видит свой уникальный номер вместо ID

### Безопасность
- Доступ к административной панели имеют только пользователи, чьи ID указаны в списке администраторов
- Все действия администраторов и пользователей логируются в системе
- Отправка сообщений пользователям доступна только администраторам

### Ошибки и сбои
- При возникновении ошибок бот отправит соответствующее сообщение
- В случае критических ошибок обратитесь к разработчику бота


## Запуск на сервере
- создать .env
- сделать rebuild.sh исполняемым
- запуск ./rebuild.sh
